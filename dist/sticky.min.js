/*!
 * @autots/sticky v0.0.1
 * Last Modified @ 2019-9-4 10:53:53 AM
 * Released under the MIT License.
 */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Sticky=e():(t.AutoTs=t.AutoTs||{},t.AutoTs.Sticky=e())}(this,function(){return function(t){var e={};function o(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,o),r.l=!0,r.exports}return o.m=t,o.c=e,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(n,r,function(e){return t[e]}.bind(null,r));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=0)}([function(t,e,o){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var r in e=arguments[o])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var r,i=!1;!function(){for(var t=["","-webkit-","-ms-","-moz-","-o-"],e=t.length,o=document.createElement("div"),n=0;n<e;n++)if(o.style.position=t[n]+"sticky",""!==o.style.position)return i=!0,void(r=t[n]);i=!1}();var s=function(){function t(e,o){var r=this;this.el=e,this.customCfg=o,this._scrollListener=function(){r.targets.forEach(function(t){r._setScrollPosition(t)})},this._throttle=function(t,e){var o,n,r,i,s;function l(){t.apply(i,s),n=o}return void 0===e&&(e=16),function(){for(var t=[],f=0;f<arguments.length;f++)t[f]=arguments[f];if(i=this,s=t,o=Date.now(),r&&(clearTimeout(r),r=null),n){var c=e-(o-n);c<0?l():r=setTimeout(function(){l()},c)}else l()}},e?("string"==typeof e?this.targets=Array.prototype.slice.apply(document.querySelectorAll(e)):e instanceof HTMLElement?this.targets=[e]:e.length&&(this.targets=Array.prototype.slice.call(e)),this.targets&&this.targets.length?(this.config=n(n({},t.defaultConfig),o),this._init()):console.error(new Error("Sticky 初始化失败，无法获取到有效的被监听元素"))):console.error(new Error("Sticky 初始化错误，缺少必要的选择器参数"))}return t.prototype._init=function(){i?this._setCssSticky():(this.config.throttle?this.listener=this._throttle(this._scrollListener):this.listener=this._scrollListener,window.addEventListener("scroll",this.listener,!1))},t.prototype._setCssSticky=function(){var t=this.config;this.targets.forEach(function(e){e.style.position=r+"sticky",e.style.top="string"==typeof t.top?t.top:t.top+"px",e.style.zIndex=t.zIndex.toString()})},t.prototype._setScrollPosition=function(t){var e=t.firstElementChild,o=this.config,n=t.offsetTop,r=t.getBoundingClientRect().top,i=t.offsetParent.offsetHeight,s=e.style;if(r<=o.top){var l=parseInt(t.style.height);l&&l===e.offsetHeight||(t.style.height=e.offsetHeight+"px"),i-n-t.offsetHeight-Math.abs(r)<0?(s.position="absolute",s.bottom="0px",s.top=""):(s.position="fixed",s.bottom="",s.top=o.top+"px"),s.zIndex=o.zIndex.toString()}else s.position="static"},t.prototype.destory=function(){var t=this;this.listener&&window.removeEventListener("scroll",this.listener,!1),setTimeout(function(){t._resetStyle(t.targets)},100)},t.prototype._resetStyle=function(t){t.forEach(function(t){if(i)t.style.position="",t.style.top="",t.style.zIndex="";else{var e=t.firstElementChild;t.style.height="",e.style.position="",e.style.top="",e.style.bottom="",e.style.zIndex=""}})},t.prototype.unbind=function(t){var e,o=this;"string"==typeof t?e=Array.prototype.slice.apply(document.querySelectorAll(t)):t instanceof HTMLElement?e=[t]:t.length&&(e=Array.prototype.slice.call(t)),this.targets=this.targets.filter(function(t){for(var n=0;n<e.length;n++)if(e[n]===t)return o._resetStyle([e[n]]),!1;return!0})},t.defaultConfig={top:0,zIndex:100,throttle:!1},t}();e.default=s}]).default});