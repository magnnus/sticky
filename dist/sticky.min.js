/*!
 * @autots/sticky v0.0.2
 * Last Modified @ 2020-4-30 14:31:21
 * Released under the MIT License.
 */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Sticky=e():(t.AutoTs=t.AutoTs||{},t.AutoTs.Sticky=e())}(this,function(){return function(t){var e={};function o(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,o),i.l=!0,i.exports}return o.m=t,o.c=e,o.d=function(t,e,r){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)o.d(r,i,function(e){return t[e]}.bind(null,i));return r},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=0)}([function(t,e,o){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,o=1,r=arguments.length;o<r;o++)for(var i in e=arguments[o])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var i,n=!1;!function(){for(var t=["","-webkit-","-ms-","-moz-","-o-"],e=t.length,o=document.createElement("div"),r=0;r<e;r++)if(o.style.position=t[r]+"sticky",""!==o.style.position)return n=!0,void(i=t[r]);n=!1}();var s=function(){function t(e,o){var i=this;this.el=e,this.customCfg=o,this._affixListener=function(){var t=i,e=t.target,o=t.targetHolder,r=t.config,n=isNaN(r.top)&&!isNaN(r.bottom)?"bottom":"top",s=(o||e).getBoundingClientRect(),l=e.style,f=0;"bottom"===n&&(f=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight),s[n]<Math.abs(f-r[n])?(i.createTargetHolder(),i.setStyleForTarget(),l.position="fixed",l[n]=r[n]+"px"):(i.removeTagetHolder(),e.removeAttribute("style"))},this._fallbackStickyListener=function(){i.scrollRefer!==window?i._setPosOnInnerSticky():i._setPosOnWindowSticky()},this._throttle=function(t,e){var o,r,i,n,s;function l(){t.apply(n,s),r=o}return void 0===e&&(e=16),function(){for(var t=[],f=0;f<arguments.length;f++)t[f]=arguments[f];if(n=this,s=t,o=Date.now(),i&&(clearTimeout(i),i=null),r){var a=e-(o-r);a<0?l():i=setTimeout(function(){l()},a)}else l()}},e?("string"==typeof e?this.target=document.querySelector(e):e instanceof HTMLElement&&(this.target=e),this.target?(this.config=r(r({},t.defaultConfig),o),this._init()):console.error(e,new Error("Sticky Init Error: unable to get a valid listening element"))):console.error(new Error("Sticky Init Error: missing necessary first param"))}return t.prototype._init=function(){if("affix"===this.config.mode)return n&&this.target.parentElement===document.body?void this._initNativeStickyMode():void this._initAffixMode();n?this._initNativeStickyMode():this._initFallbackStickyMode()},t.prototype.createTargetHolder=function(){var t=this.target;if(!this.targetHolder){var e=document.createElement("div"),o=getComputedStyle(t,null);e.style.cssText="float: "+o.cssFloat+"; display: "+o.display+"; width: "+t.offsetWidth+"px; height: "+t.offsetHeight+"px; margin: "+o.marginTop+" "+o.marginRight+" "+o.marginBottom+" "+o.marginLeft+";",t.insertAdjacentElement("beforebegin",e),this.targetHolder=e,this.setStyleForHolder()}},t.prototype.removeTagetHolder=function(){var t=this.targetHolder;t&&(t.parentNode.removeChild(t),this.targetHolder=null)},t.prototype._initAffixMode=function(){this.config.throttle?this.listener=this._throttle(this._affixListener):this.listener=this._affixListener,this._initTargetInfo(),window.addEventListener("scroll",this.listener,!1)},t.prototype._initNativeStickyMode=function(){var t=this.config,e=t.top,o=t.bottom,r=this.target;this.setStyleForTarget(),r.style.position=i+"sticky",isNaN(e)?isNaN(o)||(r.style.bottom=o+"px"):r.style.top=e+"px"},t.prototype._initFallbackStickyMode=function(){var t,e=this.config,o=e.scrollRefer,r=e.offsetParent;if(-1!==[window,document,document.body].indexOf(o)?t=window:"string"==typeof o?t=document.querySelector(o):o instanceof Element&&(t=o),t){this.scrollRefer=t;var i=null;r?"string"==typeof r?i=(this.scrollRefer===window?document:this.scrollRefer).querySelector(r):r instanceof Element&&(i=r):i=this.target.offsetParent,this.offsetParent=i,e.throttle?this.listener=this._throttle(this._fallbackStickyListener):this.listener=this._fallbackStickyListener,this._initTargetInfo(),this.scrollRefer.addEventListener("scroll",this.listener,!1)}else console.error(new Error("Add Sticky Scroll Listener Error: invalid scrollRefer param"),e)},t.prototype.setStyleForTarget=function(){for(var t=this.config,e=this.target,o=t.style,r=0,i=Object.keys(o);r<i.length;r++){var n=i[r];e.style[n]=o[n]}},t.prototype.setStyleForHolder=function(){for(var t=this.config,e=this.targetHolder,o=t.holderStyle,r=0,i=Object.keys(o);r<i.length;r++){var n=i[r];e.style[n]=o[n]}},t.prototype._getTopDist=function(t){for(var e=0,o=this.target;o!==t&&null!==o;)e+=o.offsetTop,o!==this.target&&(e+=parseInt(getComputedStyle(o).borderTopWidth,10)),o=o.offsetParent;return e},t.prototype._getLeftDist=function(t){for(var e=0,o=this.target;o!==t&&null!==o;)e+=o.offsetLeft,o!==this.target&&(e+=parseInt(getComputedStyle(o).borderLeftWidth,10)),o=o.offsetParent;return e},t.prototype._initTargetInfo=function(){var t=this.target,e=this.scrollRefer,o=this.offsetParent,r=t.getBoundingClientRect();this.targetInfo={topToRefer:this._getTopDist(e),topToParent:this._getTopDist(o),leftToRefer:this._getLeftDist(e),leftToParent:this._getLeftDist(o),height:t.offsetHeight,width:t.offsetWidth,leftToClient:r.left}},t.prototype._setPosOnWindowSticky=function(){var t=this.target,e=this.targetHolder,o=this.config,r=this.targetInfo,i=(e||t).getBoundingClientRect().top,n=this.offsetParent.offsetHeight,s=t.style;i<=o.top?(this.createTargetHolder(),this.setStyleForTarget(),n-r.topToParent-r.height-o.top<Math.abs(i)?(s.position="absolute",s.bottom="0px",s.left=r.leftToParent+"px",s.removeProperty("top")):(s.position="fixed",s.top=o.top+"px",s.left=r.leftToClient+"px",s.removeProperty("bottom"))):(t.removeAttribute("style"),this.removeTagetHolder())},t.prototype._setPosOnInnerSticky=function(){var t=this,e=t.target,o=t.targetInfo,r=t.scrollRefer,i=t.offsetParent,n=t.config,s="top",l="bottom";isNaN(n.top)&&!isNaN(n.bottom)&&(s="bottom",l="top");var f=e.offsetHeight,a=i.offsetHeight,c=r.scrollTop,h=o.topToRefer,u=e.style;c<=h-n[s]?(e.removeAttribute("style"),this.removeTagetHolder()):c<a+h-f-o.topToParent-n[s]?(this.createTargetHolder(),this.setStyleForTarget(),u.position="absolute",u[s]=c-h+n[s]+"px",u.removeProperty(l)):c<a+h-o.topToParent?(this.createTargetHolder(),this.setStyleForTarget(),u.position="absolute",u[l]="0px",u.removeProperty(s)):(e.removeAttribute("style"),this.removeTagetHolder())},t.prototype.destory=function(){var t=this;this.listener&&window.removeEventListener("scroll",this.listener,!1),setTimeout(function(){t.resetStyle(),t.removeTagetHolder()},100)},t.prototype.resetStyle=function(){this.target.removeAttribute("style")},t}();s.defaultConfig={mode:"sticky",direction:"vertical",scrollRefer:window,offsetParent:null,style:{zIndex:"100"},holderStyle:{},zIndex:100,throttle:!1},e.default=s}]).default});